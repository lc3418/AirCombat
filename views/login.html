<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Log in-AirCombat</title>
    <link rel="stylesheet" href="../stylesheets/bootstrap.min.css">
    <!--overwrite css format of bootstrap-->
    <style type="text/css">
        .tc{text-align: center;
            font-size: 30px;
            font-weight: 600;}
        .col-center-block {
            float: none;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        .col-sm-offset-10 {
            margin-left: 0;
        }
        .col-sm-2 {
            width: 100%;
        }
        .container {
            width: 100%;
            margin-top: 250px;
        }
        </style>
</head>
<body background="../img/index_bg.jpg">
	<div class="container">
	<form class="col-sm-offset-4 col-sm-4 form-horizontal" role="form" method="post" onsubmit="return false">
	<fieldset>
		<div class="panel panel-default>
		<div class="panel-heading">
                    <p class="tc">Sign in</p>
                </div>
                <div class="panel-body m15">
                <div class="form-group">
                    <div class="input-group">
                        <span class="input-group-addon">
                        <span class="glyphicon glyphicon-user"></span>
                        </span>
                        <input type="text" class="form-control" id="username" name="username" placeholder="Input username" required>
                    </div>
                </div>
                <div class="form-group">
                    <div class="input-group">
                        <span class="input-group-addon">
                        <span class="glyphicon glyphicon-lock"></span>
                        </span>
                        <input type="password" class="form-control" id="password" name="password" placeholder="Input password" required>
                    </div>
                </div>
                <div class="form-group">
                        <button type="button" class="btn btn-primary btn-block" id="login">login</button>
                </div>
                <div class="form-group">
                        <button type="button" class="btn btn-info col-sm-2 col-sm-offset-10" id="register">register</button>
                </div>
                </div>
                </div>
            </fieldset>
        </form>
    </div>
    <script src="../javascripts/bootstrap.min.js"></script>
    <script type="text/javascript" src="javascripts/jquery.min.js"></script>
    <script type="text/javascript">
        $(function(){ 
            $('#login').click(function(){
                var username=$('#username').val();
                var password=$('#password').val();
                var data={'username':username,'password':password};
                if(!username){
                    alert("Empty username not allowed!");
                    document.getElementById("username").focus();
                }
                else { 
                    $.ajax({
                        url:'/login',
                        type:'post',
                        data:data,
                        success:function(data,status){
                            if(status=='success'){   
                                location.href='homepage';
                            }
                        },
                        error:function(data,err){
                            alert("Wrong username or password!");
                            document.getElementById("password").focus();
                        }
                    })   
                }
            });
            $('#register').click(function(){
                location.href='regis'; 
            });
        })
        document.onkeydown = function(e) {
            e = e || window.event;
            if(e.keyCode == 13) {
                document.getElementById("login").click();
            }
        } 
    </script>
</body>
</html>
